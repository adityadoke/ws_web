box: python:2.7
no-response-timeout: 15
build:
  steps:
    - script:
        name: Build Container
        code: sudo docker build -t shantanup .

deploy:
  steps:
    - internal/docker-push:
        username: $USERNAME
        password: $PASSWORD
        tag: latest
        repository: shantanup/wercker
        registry: https://registry.hub.docker.com
  aws-ecs:
  - script:
      name: copy
      code: mkdir /app && cp wercker-app.json /app/
  - tonnu/aws-ecs:
      key: $AWS_ACCESS_KEY
      secret: $AWS_SECRET_KEY
      region: us-east-1
      cluster-name: wrecker-cluster
      service-name: wercker
      task-definition-name: wercker-task
      minimum-running-tasks: 1
